Einführung Turnierbaum


Zugehöriges Beispiel: siehe turnierbaum.pdf
Zugehörige Datenbanktabelle: ctsim_game, siehe "datenbankschema.pdf"
Erklärung von Vor- und Hauptrunde: http://www.heise.de/ct/ftp/projekte/ct-bot/sim-contest/bedingungen.shtml#TId


Der Turnierbaum beschreibt:
* Welche Spiele es gibt
* Welcher Bot in welchen Spielen spielt. (Ein Bot wird identifiziert über seine ID in der Tabelle ctsim_bot. Im Beispiel Nummern von 1 bis 21, in Kreisen dargestellt.)

Grobes Verfahren:
Der Turnierbaum wird automatisch nach der Vorrunde und vor der Hauptrunde erzeugt und in die DB-Tabelle ctsim_game geschrieben. Das Beispiel (turnierbaum.pdf) stellt einen Turnierbaum zu diesem Zeitpunkt dar. Alle Spiele sind zu diesem Zeitpunkt angelegt, aber für viele von ihnen ist noch nicht klar, welche Bots die zwei Kontrahenten sein werden (im Beispiel ist das mit "?" markiert, in der Tabelle mit bot1 = NULL und/oder bot2 = NULL).
Wenn später im Verlauf der Hauptrunde ein Spiel, z.B. Bot 1 gegen Bot 9, abgeschlossen ist, scheidet der Verlierer aus (K.o.-System). Der Sieger wird ins entsprechende Spiel des nächsthöheren Levels versetzt. Der Sieger kommt also auf den Platz des Fragezeichens im höherliegenden Spiel. Das ist im Beispiel durch Pfeile markiert. (Die einzige Ausnahme vom K.o.-System ist das Halbfinale, wo die Gewinner ins Finale und die Verlierer ins Spiel um den 3. Platz gesetzt werden.)

Details:
* Ein Spiel wird identifiziert über die Datenbankfelder gameId & levelId -- z.B. 5 & 8 für fünftes Achtelfinalspiel
* levelIds sind Zweierpotenzen (1, 2, 4, 8 usw.). Es gibt zwei Ausnahmewerte: -1 = Vorrunde, 0 = Spiel um den 3. Platz
* gameIds sind fortlaufend und 1-based (1, 2, 3, 4 usw.)
* Je nach Teilnehmerzahl kann es sein, dass nicht alle Spiele des untersten Levels gefüllt sind -- im Beispiel mit 21 Spielern: Von den 16 Spielen im Sechzehntelfinale bleiben 11 frei und werden nie gespielt
* Es stehen aber immer vollständige Levels in der Datenbank, also im Beispiel alle 16 Sechzehntelfinalsspiele. Die "leeren" Spiele haben bot1 = NULL, bot2 = NULL, state = "not init" und werden nach der Planung nie mehr angefasst. Anzeigen braucht man sie nicht.